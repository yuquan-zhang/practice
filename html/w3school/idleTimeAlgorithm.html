<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script>
    let idleTimes = [
        {
            "createTime": "2020-11-08 14:56:34",
            "createUserId": "6730783686033146880",
            "endTime": "1970-01-01 12:00:00",
            "id": "6731097046545073152",
            "idleDay": "2020-11-09 00:00:00",
            "startTime": "1970-01-01 09:00:00",
            "updateTime": "2020-11-08 14:56:34",
            "updateUserId": "6730783686033146880",
            "userId": "6730783686033146880"
        },
        {
            "createTime": "2020-11-08 14:56:34",
            "createUserId": "6730783686033146880",
            "endTime": "1970-01-01 20:00:00",
            "id": "6731097046607987712",
            "idleDay": "2020-11-11 00:00:00",
            "startTime": "1970-01-01 13:00:00",
            "updateTime": "2020-11-08 14:56:34",
            "updateUserId": "6730783686033146880",
            "userId": "6730783686033146880"
        }
    ];
    let selectedTimes = [
        {
            "createTime": null,
            "createUserId": null,
            "endTime": "1970-01-01 17:00:00",
            "id": null,
            "idleDay": "2020-11-11 15:00:00",
            "startTime": "1970-01-01 15:00:00",
            "updateTime": null,
            "updateUserId": null,
            "userId": null
        },
        {
            "createTime": null,
            "createUserId": null,
            "endTime": "1970-01-01 17:00:00",
            "id": null,
            "idleDay": "2020-11-12 15:00:00",
            "startTime": "1970-01-01 15:00:00",
            "updateTime": null,
            "updateUserId": null,
            "userId": null
        }
    ];
    let defaultTimes = [
        {
            "createTime": null,
            "createUserId": null,
            "endTime": "1970-01-01 20:00:00",
            "id": null,
            "idleDay": "2020-11-11 00:00:00",
            "startTime": "1970-01-01 13:00:00",
            "updateTime": null,
            "updateUserId": null,
            "userId": null
        },
        {
            "createTime": null,
            "createUserId": null,
            "endTime": "1970-01-01 12:00:00",
            "id": null,
            "idleDay": "2020-11-11 00:00:00",
            "startTime": "1970-01-01 08:00:00",
            "updateTime": null,
            "updateUserId": null,
            "userId": null
        },
        {
            "createTime": null,
            "createUserId": null,
            "endTime": "1970-01-01 20:00:00",
            "id": null,
            "idleDay": "2020-11-12 00:00:00",
            "startTime": "1970-01-01 13:00:00",
            "updateTime": null,
            "updateUserId": null,
            "userId": null
        },
        {
            "createTime": null,
            "createUserId": null,
            "endTime": "1970-01-01 12:00:00",
            "id": null,
            "idleDay": "2020-11-12 00:00:00",
            "startTime": "1970-01-01 08:00:00",
            "updateTime": null,
            "updateUserId": null,
            "userId": null
        },
        {
            "createTime": null,
            "createUserId": null,
            "endTime": "1970-01-01 20:00:00",
            "id": null,
            "idleDay": "2020-11-13 00:00:00",
            "startTime": "1970-01-01 13:00:00",
            "updateTime": null,
            "updateUserId": null,
            "userId": null
        },
        {
            "createTime": null,
            "createUserId": null,
            "endTime": "1970-01-01 12:00:00",
            "id": null,
            "idleDay": "2020-11-13 00:00:00",
            "startTime": "1970-01-01 08:00:00",
            "updateTime": null,
            "updateUserId": null,
            "userId": null
        },
    ];
    let selectTimeMap = {};
    selectedTimes.forEach(item => {
        let date = new Date(item.startTime);
        item["timeFlag"] = item.idleDay.split(' ')[0] + (date.getHours() <= 12 ? "上午" : "下午");
        selectTimeMap[item.timeFlag] = true;
    })
    console.log(selectedTimes);

    let idleTimeMap = {};
    idleTimes.forEach(item => {
        let date = new Date(item.startTime);
        item["timeFlag"] = item.idleDay.split(' ')[0] + (date.getHours() <= 12 ? "上午" : "下午");
        item.isSelected = selectTimeMap[item.timeFlag] || false;
        idleTimeMap[item.timeFlag] = item;
    });
    console.log(idleTimes);
    defaultTimes.forEach(item => {
        let date = new Date(item.startTime);
        item["timeFlag"] = item.idleDay.split(' ')[0] + (date.getHours() <= 12 ? "上午" : "下午");
        let idleTime = selectTimeMap[item.timeFlag]
        if (null != idleTime) {
            item.isIdle = true;
            item.isSelected = idleTime.isSelected;
        } else {
            item.isIdle = false;
            item.isSelected = false;
        }
    });


</script>
</body>
</html>